{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Adapter = void 0;\n\nconst core = __importStar(require(\"@shapeshiftoss/hdwallet-core\"));\n\nconst keepkey_1 = require(\"./keepkey\");\n\nconst transport_1 = require(\"./transport\");\n\nclass Adapter {\n  constructor(keyring, delegate) {\n    var _a, _b;\n\n    this.keyring = keyring;\n    this.delegate = delegate;\n\n    try {\n      (_b = (_a = this.delegate).registerCallbacks) === null || _b === void 0 ? void 0 : _b.call(_a, this.handleConnect.bind(this), this.handleDisconnect.bind(this));\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  static fromDelegate(delegate) {\n    const fn = keyring => new Adapter(keyring, delegate);\n\n    const out = fn;\n    out.useKeyring = fn;\n    return out;\n  }\n\n  static inspectDevice(delegate, device) {\n    var _a, _b;\n\n    return __awaiter(this, void 0, void 0, function* () {\n      const props = (_b = yield Promise.resolve((_a = delegate.inspectDevice) === null || _a === void 0 ? void 0 : _a.call(delegate, device))) !== null && _b !== void 0 ? _b : [\"object\", \"function\"].includes(typeof device) ? device : {};\n      if (!props.serialNumber && typeof device === \"string\") props.serialNumber = device;\n      return {\n        get productName() {\n          const out = props[\"productName\"];\n          return typeof out === \"string\" ? out : \"KeepKey\";\n        },\n\n        get serialNumber() {\n          const out = props[\"serialNumber\"];\n          if (typeof out !== \"string\") throw new Error(\"could not get serialNumber from device\");\n          return out;\n        }\n\n      };\n    });\n  }\n\n  inspectDevice(device) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return Adapter.inspectDevice(this.delegate, device);\n    });\n  }\n\n  handleConnect(device) {\n    return __awaiter(this, void 0, void 0, function* () {\n      try {\n        yield this.initialize([device]);\n        const {\n          productName,\n          serialNumber\n        } = yield this.inspectDevice(device);\n        yield this.keyring.emit([productName, serialNumber, core.Events.CONNECT], serialNumber);\n      } catch (e) {\n        console.error(e);\n      }\n    });\n  }\n\n  handleDisconnect(device) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const {\n        productName,\n        serialNumber\n      } = yield this.inspectDevice(device);\n\n      try {\n        yield this.keyring.remove(serialNumber);\n      } catch (_a) {}\n\n      yield this.keyring.emit([productName, serialNumber, core.Events.DISCONNECT], serialNumber);\n    });\n  }\n\n  initialize(devices, tryDebugLink, autoConnect) {\n    return __awaiter(this, void 0, void 0, function* () {\n      devices = devices !== null && devices !== void 0 ? devices : yield this.getDevices();\n\n      for (const device of devices) {\n        const {\n          serialNumber\n        } = yield this.inspectDevice(device);\n        if (this.keyring.wallets[serialNumber]) yield this.keyring.remove(serialNumber);\n        const delegate = yield this.getTransportDelegate(device);\n        if (delegate === null) continue;\n        const transport = yield transport_1.Transport.create(this.keyring, delegate);\n        yield transport.connect();\n        if (tryDebugLink) yield transport.tryConnectDebugLink();\n        const wallet = yield keepkey_1.KeepKeyHDWallet.create(transport);\n        if (autoConnect) yield wallet.initialize();\n        this.keyring.add(wallet, serialNumber);\n      }\n\n      return Object.keys(this.keyring.wallets).length;\n    });\n  }\n\n  getDevice(serialNumber) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (this.delegate.getDevice) return yield this.delegate.getDevice(serialNumber);\n      if (!serialNumber) throw new Error(\"no default device specified\");\n      const devices = yield this.getDevices();\n      return (yield Promise.all(devices.map(x => __awaiter(this, void 0, void 0, function* () {\n        return (yield this.inspectDevice(x)).serialNumber === serialNumber ? x : null;\n      })))).filter(x => x !== null)[0];\n    });\n  }\n\n  getDevices() {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (this.delegate.getDevices) return yield this.delegate.getDevices();\n      let defaultDevice = undefined;\n\n      try {\n        defaultDevice = yield this.getDevice();\n      } catch (_a) {}\n\n      return defaultDevice ? [defaultDevice] : [];\n    });\n  }\n\n  getTransportDelegate(device) {\n    return __awaiter(this, void 0, void 0, function* () {\n      return yield this.delegate.getTransportDelegate(device);\n    });\n  }\n\n  pairDevice(serialNumber, tryDebugLink) {\n    return __awaiter(this, void 0, void 0, function* () {\n      const device = yield this.getDevice(serialNumber);\n      if (!device) throw new Error(serialNumber ? `could not find device matching serial number '${serialNumber}'` : \"could not find default device\");\n      return this.pairRawDevice(device, tryDebugLink);\n    });\n  }\n\n  pairRawDevice(device, tryDebugLink) {\n    return __awaiter(this, void 0, void 0, function* () {\n      yield this.initialize([device], tryDebugLink, true);\n      return core.mustBeDefined(this.keyring.get((yield this.inspectDevice(device)).serialNumber));\n    });\n  }\n\n}\n\nexports.Adapter = Adapter;","map":{"version":3,"sources":["../src/adapter.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Adapter = void 0;\nconst core = __importStar(require(\"@shapeshiftoss/hdwallet-core\"));\nconst keepkey_1 = require(\"./keepkey\");\nconst transport_1 = require(\"./transport\");\nclass Adapter {\n    constructor(keyring, delegate) {\n        var _a, _b;\n        this.keyring = keyring;\n        this.delegate = delegate;\n        try {\n            (_b = (_a = this.delegate).registerCallbacks) === null || _b === void 0 ? void 0 : _b.call(_a, this.handleConnect.bind(this), this.handleDisconnect.bind(this));\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n    static fromDelegate(delegate) {\n        const fn = (keyring) => new Adapter(keyring, delegate);\n        const out = fn;\n        out.useKeyring = fn;\n        return out;\n    }\n    static inspectDevice(delegate, device) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const props = (_b = (yield Promise.resolve((_a = delegate.inspectDevice) === null || _a === void 0 ? void 0 : _a.call(delegate, device)))) !== null && _b !== void 0 ? _b : ([\"object\", \"function\"].includes(typeof device) ? device : {});\n            if (!props.serialNumber && typeof device === \"string\")\n                props.serialNumber = device;\n            return {\n                get productName() {\n                    const out = props[\"productName\"];\n                    return typeof out === \"string\" ? out : \"KeepKey\";\n                },\n                get serialNumber() {\n                    const out = props[\"serialNumber\"];\n                    if (typeof out !== \"string\")\n                        throw new Error(\"could not get serialNumber from device\");\n                    return out;\n                },\n            };\n        });\n    }\n    inspectDevice(device) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return Adapter.inspectDevice(this.delegate, device);\n        });\n    }\n    handleConnect(device) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this.initialize([device]);\n                const { productName, serialNumber } = yield this.inspectDevice(device);\n                yield this.keyring.emit([productName, serialNumber, core.Events.CONNECT], serialNumber);\n            }\n            catch (e) {\n                console.error(e);\n            }\n        });\n    }\n    handleDisconnect(device) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { productName, serialNumber } = yield this.inspectDevice(device);\n            try {\n                yield this.keyring.remove(serialNumber);\n            }\n            catch (_a) { }\n            yield this.keyring.emit([productName, serialNumber, core.Events.DISCONNECT], serialNumber);\n        });\n    }\n    initialize(devices, tryDebugLink, autoConnect) {\n        return __awaiter(this, void 0, void 0, function* () {\n            devices = devices !== null && devices !== void 0 ? devices : (yield this.getDevices());\n            for (const device of devices) {\n                const { serialNumber } = yield this.inspectDevice(device);\n                if (this.keyring.wallets[serialNumber])\n                    yield this.keyring.remove(serialNumber);\n                const delegate = yield this.getTransportDelegate(device);\n                if (delegate === null)\n                    continue;\n                const transport = yield transport_1.Transport.create(this.keyring, delegate);\n                yield transport.connect();\n                if (tryDebugLink)\n                    yield transport.tryConnectDebugLink();\n                const wallet = yield keepkey_1.KeepKeyHDWallet.create(transport);\n                if (autoConnect)\n                    yield wallet.initialize();\n                this.keyring.add(wallet, serialNumber);\n            }\n            return Object.keys(this.keyring.wallets).length;\n        });\n    }\n    getDevice(serialNumber) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.delegate.getDevice)\n                return yield this.delegate.getDevice(serialNumber);\n            if (!serialNumber)\n                throw new Error(\"no default device specified\");\n            const devices = yield this.getDevices();\n            return (yield Promise.all(devices.map((x) => __awaiter(this, void 0, void 0, function* () { return ((yield this.inspectDevice(x)).serialNumber === serialNumber ? x : null); })))).filter((x) => x !== null)[0];\n        });\n    }\n    getDevices() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.delegate.getDevices)\n                return yield this.delegate.getDevices();\n            let defaultDevice = undefined;\n            try {\n                defaultDevice = yield this.getDevice();\n            }\n            catch (_a) { }\n            return defaultDevice ? [defaultDevice] : [];\n        });\n    }\n    getTransportDelegate(device) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.delegate.getTransportDelegate(device);\n        });\n    }\n    pairDevice(serialNumber, tryDebugLink) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const device = yield this.getDevice(serialNumber);\n            if (!device)\n                throw new Error(serialNumber\n                    ? `could not find device matching serial number '${serialNumber}'`\n                    : \"could not find default device\");\n            return this.pairRawDevice(device, tryDebugLink);\n        });\n    }\n    pairRawDevice(device, tryDebugLink) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.initialize([device], tryDebugLink, true);\n            return core.mustBeDefined(this.keyring.get((yield this.inspectDevice(device)).serialNumber));\n        });\n    }\n}\nexports.Adapter = Adapter;\n//# sourceMappingURL=adapter.js.map"]},"metadata":{},"sourceType":"script"}