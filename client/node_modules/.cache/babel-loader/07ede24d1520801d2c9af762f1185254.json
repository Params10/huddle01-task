{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst communication_1 = require(\"./communication\");\n\nconst communication_2 = __importDefault(require(\"./communication\"));\n\nconst txs_1 = require(\"./txs\");\n\nconst eth_1 = require(\"./eth\");\n\nclass SafeAppsSDK {\n  constructor(opts = {}) {\n    if (typeof window === 'undefined') {\n      throw new Error('Error initializing the sdk: window is undefined');\n    }\n\n    const {\n      whitelistedDomains = null,\n      debug = false\n    } = opts;\n    this.communicator = new communication_2.default(whitelistedDomains, debug);\n    this.eth = new eth_1.Eth(this.communicator);\n    this.txs = new txs_1.TXs(this.communicator);\n    this.bootstrap();\n  }\n\n  async bootstrap() {\n    const {\n      txServiceUrl\n    } = await this.getEnvInfo();\n    this.txs.setTxServiceUrl(txServiceUrl);\n  }\n\n  async getEnvInfo() {\n    const response = await this.communicator.send(communication_1.METHODS.getEnvInfo, undefined);\n\n    if (!response.success) {\n      throw new Error(response.error);\n    }\n\n    return response.data;\n  }\n\n  async getSafeInfo() {\n    const response = await this.communicator.send(communication_1.METHODS.getSafeInfo, undefined);\n\n    if (!response.success) {\n      throw new Error(response.error);\n    }\n\n    return response.data;\n  }\n\n}\n\nexports.default = SafeAppsSDK;","map":{"version":3,"sources":["../../src/sdk.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,MAAA,eAAA,GAAA,OAAA,CAAA,iBAAA,CAAA;;AAEA,MAAA,eAAA,GAAA,eAAA,CAAA,OAAA,CAAA,iBAAA,CAAA,CAAA;;AACA,MAAA,KAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AACA,MAAA,KAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AAOA,MAAM,WAAN,CAAiB;AAKf,EAAA,WAAA,CAAY,IAAA,GAAa,EAAzB,EAA2B;AACzB,QAAI,OAAO,MAAP,KAAkB,WAAtB,EAAmC;AACjC,YAAM,IAAI,KAAJ,CAAU,iDAAV,CAAN;AACD;;AAED,UAAM;AAAE,MAAA,kBAAkB,GAAG,IAAvB;AAA6B,MAAA,KAAK,GAAG;AAArC,QAA+C,IAArD;AAEA,SAAK,YAAL,GAAoB,IAAI,eAAA,CAAA,OAAJ,CAA0B,kBAA1B,EAA8C,KAA9C,CAApB;AACA,SAAK,GAAL,GAAW,IAAI,KAAA,CAAA,GAAJ,CAAQ,KAAK,YAAb,CAAX;AACA,SAAK,GAAL,GAAW,IAAI,KAAA,CAAA,GAAJ,CAAQ,KAAK,YAAb,CAAX;AACA,SAAK,SAAL;AACD;;AAEsB,QAAT,SAAS,GAAA;AACrB,UAAM;AAAE,MAAA;AAAF,QAAmB,MAAM,KAAK,UAAL,EAA/B;AAEA,SAAK,GAAL,CAAS,eAAT,CAAyB,YAAzB;AACD;;AAEuB,QAAV,UAAU,GAAA;AACtB,UAAM,QAAQ,GAAG,MAAM,KAAK,YAAL,CAAkB,IAAlB,CAAyD,eAAA,CAAA,OAAA,CAAQ,UAAjE,EAA6E,SAA7E,CAAvB;;AAEA,QAAI,CAAC,QAAQ,CAAC,OAAd,EAAuB;AACrB,YAAM,IAAI,KAAJ,CAAU,QAAQ,CAAC,KAAnB,CAAN;AACD;;AAED,WAAO,QAAQ,CAAC,IAAhB;AACD;;AAEgB,QAAX,WAAW,GAAA;AACf,UAAM,QAAQ,GAAG,MAAM,KAAK,YAAL,CAAkB,IAAlB,CAA2D,eAAA,CAAA,OAAA,CAAQ,WAAnE,EAAgF,SAAhF,CAAvB;;AAEA,QAAI,CAAC,QAAQ,CAAC,OAAd,EAAuB;AACrB,YAAM,IAAI,KAAJ,CAAU,QAAQ,CAAC,KAAnB,CAAN;AACD;;AAED,WAAO,QAAQ,CAAC,IAAhB;AACD;;AA1Cc;;AA6CjB,OAAA,CAAA,OAAA,GAAe,WAAf","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst communication_1 = require(\"./communication\");\nconst communication_2 = __importDefault(require(\"./communication\"));\nconst txs_1 = require(\"./txs\");\nconst eth_1 = require(\"./eth\");\nclass SafeAppsSDK {\n    constructor(opts = {}) {\n        if (typeof window === 'undefined') {\n            throw new Error('Error initializing the sdk: window is undefined');\n        }\n        const { whitelistedDomains = null, debug = false } = opts;\n        this.communicator = new communication_2.default(whitelistedDomains, debug);\n        this.eth = new eth_1.Eth(this.communicator);\n        this.txs = new txs_1.TXs(this.communicator);\n        this.bootstrap();\n    }\n    async bootstrap() {\n        const { txServiceUrl } = await this.getEnvInfo();\n        this.txs.setTxServiceUrl(txServiceUrl);\n    }\n    async getEnvInfo() {\n        const response = await this.communicator.send(communication_1.METHODS.getEnvInfo, undefined);\n        if (!response.success) {\n            throw new Error(response.error);\n        }\n        return response.data;\n    }\n    async getSafeInfo() {\n        const response = await this.communicator.send(communication_1.METHODS.getSafeInfo, undefined);\n        if (!response.success) {\n            throw new Error(response.error);\n        }\n        return response.data;\n    }\n}\nexports.default = SafeAppsSDK;\n//# sourceMappingURL=sdk.js.map"]},"metadata":{},"sourceType":"script"}