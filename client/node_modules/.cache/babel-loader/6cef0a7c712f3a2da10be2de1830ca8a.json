{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar index_1 = require(\"./index\");\n\nvar CHARSET = 'qpzry9x8gf2tvdw0s3jn54khce6mua7l';\nvar GENERATOR = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\n\nvar polymod = function (values) {\n  var chk = 1;\n\n  for (var p = 0; p < values.length; ++p) {\n    var top_1 = chk >> 25;\n    chk = (chk & 0x1ffffff) << 5 ^ values[p];\n\n    for (var i = 0; i < 6; ++i) {\n      if (top_1 >> i & 1) {\n        chk ^= GENERATOR[i];\n      }\n    }\n  }\n\n  return chk;\n};\n\nvar hrpExpand = function (hrp) {\n  var ret = [];\n  var p;\n\n  for (p = 0; p < hrp.length; ++p) {\n    ret.push(hrp.charCodeAt(p) >> 5);\n  }\n\n  ret.push(0);\n\n  for (p = 0; p < hrp.length; ++p) {\n    ret.push(hrp.charCodeAt(p) & 31);\n  }\n\n  return ret;\n};\n\nvar verifyChecksum = function (hrp, data, version) {\n  var header;\n\n  if (hrp) {\n    header = hrpExpand(hrp);\n  } else {\n    header = [0];\n  }\n\n  var check = version === index_1.Bech32Version.Origin ? 1 : 0x3fffffff;\n  return polymod(header.concat(data)) === check;\n};\n\nvar createChecksum = function (hrp, data, bech32Version) {\n  var values;\n\n  if (hrp) {\n    values = hrpExpand(hrp).concat(data).concat([0, 0, 0, 0, 0, 0]);\n  } else {\n    values = [0].concat(data).concat([0, 0, 0, 0, 0, 0]);\n  }\n\n  var chk = bech32Version === index_1.Bech32Version.Origin ? 1 : 0x3fffffff;\n  var mod = polymod(values) ^ chk;\n  var ret = [];\n\n  for (var p = 0; p < 6; ++p) {\n    ret.push(mod >> 5 * (5 - p) & 31);\n  }\n\n  return ret;\n};\n\nvar encode = function (hrp, data, version) {\n  var combined = data.concat(createChecksum(hrp, data, version));\n  var ret;\n\n  if (hrp) {\n    ret = hrp + '1';\n  } else {\n    ret = '';\n  }\n\n  for (var p = 0; p < combined.length; ++p) {\n    ret += CHARSET.charAt(combined[p]);\n  }\n\n  return ret;\n};\n\nvar decodeBc32 = function (bechString) {\n  var data = [];\n\n  for (var p = 0; p < bechString.length; ++p) {\n    var d = CHARSET.indexOf(bechString.charAt(p));\n\n    if (d === -1) {\n      return null;\n    }\n\n    data.push(d);\n  }\n\n  if (!verifyChecksum(undefined, data, index_1.Bech32Version.bis)) {\n    return null;\n  }\n\n  return {\n    hrp: null,\n    data: data.slice(0, data.length - 6)\n  };\n};\n\nvar decode = function (bechString) {\n  var p;\n  var hasLower = false;\n  var hasUpper = false;\n\n  for (p = 0; p < bechString.length; ++p) {\n    if (bechString.charCodeAt(p) < 33 || bechString.charCodeAt(p) > 126) {\n      return null;\n    }\n\n    if (bechString.charCodeAt(p) >= 97 && bechString.charCodeAt(p) <= 122) {\n      hasLower = true;\n    }\n\n    if (bechString.charCodeAt(p) >= 65 && bechString.charCodeAt(p) <= 90) {\n      hasUpper = true;\n    }\n  }\n\n  if (hasLower && hasUpper) {\n    return null;\n  }\n\n  bechString = bechString.toLowerCase();\n  var pos = bechString.lastIndexOf('1');\n\n  if (pos === -1) {\n    return decodeBc32(bechString);\n  }\n\n  if (pos < 1 || pos + 7 > bechString.length || bechString.length > 90) {\n    return null;\n  }\n\n  var hrp = bechString.substring(0, pos);\n  var data = [];\n\n  for (p = pos + 1; p < bechString.length; ++p) {\n    var d = CHARSET.indexOf(bechString.charAt(p));\n\n    if (d === -1) {\n      return null;\n    }\n\n    data.push(d);\n  }\n\n  if (!verifyChecksum(hrp, data, index_1.Bech32Version.Origin)) {\n    return null;\n  }\n\n  return {\n    hrp: hrp,\n    data: data.slice(0, data.length - 6)\n  };\n};\n\nexports.default = {\n  encode: encode,\n  decode: decode\n};","map":{"version":3,"sources":["../src/bech32.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar index_1 = require(\"./index\");\nvar CHARSET = 'qpzry9x8gf2tvdw0s3jn54khce6mua7l';\nvar GENERATOR = [0x3b6a57b2, 0x26508e6d, 0x1ea119fa, 0x3d4233dd, 0x2a1462b3];\nvar polymod = function (values) {\n    var chk = 1;\n    for (var p = 0; p < values.length; ++p) {\n        var top_1 = chk >> 25;\n        chk = ((chk & 0x1ffffff) << 5) ^ values[p];\n        for (var i = 0; i < 6; ++i) {\n            if ((top_1 >> i) & 1) {\n                chk ^= GENERATOR[i];\n            }\n        }\n    }\n    return chk;\n};\nvar hrpExpand = function (hrp) {\n    var ret = [];\n    var p;\n    for (p = 0; p < hrp.length; ++p) {\n        ret.push(hrp.charCodeAt(p) >> 5);\n    }\n    ret.push(0);\n    for (p = 0; p < hrp.length; ++p) {\n        ret.push(hrp.charCodeAt(p) & 31);\n    }\n    return ret;\n};\nvar verifyChecksum = function (hrp, data, version) {\n    var header;\n    if (hrp) {\n        header = hrpExpand(hrp);\n    }\n    else {\n        header = [0];\n    }\n    var check = version === index_1.Bech32Version.Origin ? 1 : 0x3fffffff;\n    return polymod(header.concat(data)) === check;\n};\nvar createChecksum = function (hrp, data, bech32Version) {\n    var values;\n    if (hrp) {\n        values = hrpExpand(hrp).concat(data).concat([0, 0, 0, 0, 0, 0]);\n    }\n    else {\n        values = [0].concat(data).concat([0, 0, 0, 0, 0, 0]);\n    }\n    var chk = bech32Version === index_1.Bech32Version.Origin ? 1 : 0x3fffffff;\n    var mod = polymod(values) ^ chk;\n    var ret = [];\n    for (var p = 0; p < 6; ++p) {\n        ret.push((mod >> (5 * (5 - p))) & 31);\n    }\n    return ret;\n};\nvar encode = function (hrp, data, version) {\n    var combined = data.concat(createChecksum(hrp, data, version));\n    var ret;\n    if (hrp) {\n        ret = hrp + '1';\n    }\n    else {\n        ret = '';\n    }\n    for (var p = 0; p < combined.length; ++p) {\n        ret += CHARSET.charAt(combined[p]);\n    }\n    return ret;\n};\nvar decodeBc32 = function (bechString) {\n    var data = [];\n    for (var p = 0; p < bechString.length; ++p) {\n        var d = CHARSET.indexOf(bechString.charAt(p));\n        if (d === -1) {\n            return null;\n        }\n        data.push(d);\n    }\n    if (!verifyChecksum(undefined, data, index_1.Bech32Version.bis)) {\n        return null;\n    }\n    return { hrp: null, data: data.slice(0, data.length - 6) };\n};\nvar decode = function (bechString) {\n    var p;\n    var hasLower = false;\n    var hasUpper = false;\n    for (p = 0; p < bechString.length; ++p) {\n        if (bechString.charCodeAt(p) < 33 || bechString.charCodeAt(p) > 126) {\n            return null;\n        }\n        if (bechString.charCodeAt(p) >= 97 && bechString.charCodeAt(p) <= 122) {\n            hasLower = true;\n        }\n        if (bechString.charCodeAt(p) >= 65 && bechString.charCodeAt(p) <= 90) {\n            hasUpper = true;\n        }\n    }\n    if (hasLower && hasUpper) {\n        return null;\n    }\n    bechString = bechString.toLowerCase();\n    var pos = bechString.lastIndexOf('1');\n    if (pos === -1) {\n        return decodeBc32(bechString);\n    }\n    if (pos < 1 || pos + 7 > bechString.length || bechString.length > 90) {\n        return null;\n    }\n    var hrp = bechString.substring(0, pos);\n    var data = [];\n    for (p = pos + 1; p < bechString.length; ++p) {\n        var d = CHARSET.indexOf(bechString.charAt(p));\n        if (d === -1) {\n            return null;\n        }\n        data.push(d);\n    }\n    if (!verifyChecksum(hrp, data, index_1.Bech32Version.Origin)) {\n        return null;\n    }\n    return { hrp: hrp, data: data.slice(0, data.length - 6) };\n};\nexports.default = {\n    encode: encode,\n    decode: decode,\n};\n//# sourceMappingURL=bech32.js.map"]},"metadata":{},"sourceType":"script"}